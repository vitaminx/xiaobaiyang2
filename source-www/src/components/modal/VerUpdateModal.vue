<template>
  <a-modal key="VerUpdateModal" :visible="checkShowModal" title="" :footer="null" @cancel="handleCancel">
    <a-divider orientation="left"> 版本升级提示 </a-divider>
    <div style="width: 100%; margin: 0 auto; text-align: center">
      <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" height="200" width="200" p-id="9783" version="1.1" viewBox="0 0 1024 1024">
        <path style="fill: #000000" d="m 221.73047,202.2793 c -7.14747,1.7112 -13.86163,6.19076 -17.30366,12.80321 -1.67531,3.15496 -2.33926,6.76547 -2.18658,10.31749 0,192.22995 0,384.4599 0,576.68984 1.67269,7.21855 6.17663,14.01123 12.84228,17.48335 3.15496,1.67531 6.76547,2.33926 10.31749,2.18658 26.89661,0 53.79323,0 80.68984,0 7.21858,-1.67312 14.01084,-6.17666 17.48335,-12.84228 1.67518,-3.15498 2.33922,-6.76548 2.18658,-10.31749 0.0106,-1.45793 -0.62595,-2.83392 -1.05182,-4.20885 -2.40049,-6.51953 -7.2862,-12.38683 -13.88566,-14.90061 -2.79801,-1.1137 -5.8393,-1.34838 -8.82229,-1.25031 -18.74674,0 -37.49349,0 -56.24023,0 0,-177.49349 0,-354.98697 0,-532.48046 177.49349,0 354.98697,0 532.48046,0 0,177.49349 0,354.98697 0,532.48046 -20.11002,0 -40.22005,0 -60.33007,0 -7.21858,1.67312 -14.01084,6.17666 -17.48335,12.84228 -1.90557,3.57589 -2.49475,7.73007 -2.05956,11.73176 0.44317,5.35733 2.6321,10.77379 6.87273,14.23516 4.3291,3.61572 10.14574,4.84811 15.67135,4.71034 27.0595,0 54.11901,0 81.17851,0 7.21858,-1.67312 14.01084,-6.17666 17.48335,-12.84228 1.67518,-3.15498 2.33922,-6.76548 2.18658,-10.31749 0,-192.22995 0,-384.4599 0,-576.68984 -1.67312,-7.21858 -6.17666,-14.01084 -12.84228,-17.48335 -3.15498,-1.67518 -6.76548,-2.33922 -10.31749,-2.18658 -192.22995,0 -384.4599,0 -576.68984,0 l -0.0977,0.0213 z" />
        <path style="fill: #c70019" d="m 511.39844,377.80664 c -5.54573,0.13993 -10.63642,3.08791 -14.46621,6.94672 -32.90744,32.89888 -65.80903,65.80371 -98.71153,98.70758 -3.22893,4.42752 -5.15549,10.07411 -4.16747,15.56935 0.84644,5.10025 3.96156,9.50032 7.64842,12.98971 1.03063,1.06267 2.05872,2.14148 3.38397,2.84065 4.43993,2.79866 9.97322,4.1481 15.13805,2.84028 4.75925,-1.12162 8.77921,-4.18672 12.0792,-7.68539 19.31253,-19.31175 38.62542,-38.62314 57.93736,-57.93546 0,74.00325 0,148.00651 0,222.00976 1.6724,7.2189 6.17696,14.01056 12.84228,17.48335 3.57589,1.90557 7.73007,2.49475 11.73176,2.05956 5.35733,-0.44317 10.77379,-2.6321 14.23516,-6.87273 3.61572,-4.3291 4.84811,-10.14574 4.71034,-15.67135 0,-73.00286 0,-146.00573 0,-219.00859 20.56736,20.56609 41.13218,41.13475 61.70117,61.69922 4.42752,3.22893 10.07411,5.15549 15.56935,4.16747 5.64981,-0.97566 10.51194,-4.60386 14.07127,-8.96825 3.74032,-4.6461 5.49425,-10.92409 4.28426,-16.80732 -0.90005,-4.73016 -3.60353,-8.95298 -7.09724,-12.20292 -32.58382,-32.58317 -65.16765,-65.16635 -97.75147,-97.74953 -3.79892,-2.73842 -8.39877,-4.57464 -13.13867,-4.41211 z M 413.73047,778.2793 c -7.1475,1.71163 -13.86124,6.19078 -17.30366,12.80321 -1.90557,3.57589 -2.49475,7.73007 -2.05956,11.73176 0.44439,5.38518 2.65705,10.83054 6.93802,14.2892 4.32397,3.57549 10.10766,4.79259 15.60606,4.6563 64.39284,0 128.78568,0 193.17851,0 7.21858,-1.67312 14.01084,-6.17666 17.48335,-12.84228 1.90557,-3.57589 2.49475,-7.73007 2.05956,-11.73176 -0.44317,-5.35733 -2.6321,-10.77379 -6.87273,-14.23516 -4.3291,-3.61572 -10.14574,-4.84811 -15.67135,-4.71034 -64.39284,0 -128.78568,0 -193.17851,0 l -0.0977,0.0213 z" />
      </svg>
    </div>
    <div class="verupdate">
      版本升级:<span>{{ LocalExeVer }} --> {{ ServerExeVer }}</span>
    </div>
    <div class="verupdate">
      下载地址:<a target="_blink" :href="ServerExeVerUrl">{{ ServerExeVerUrl }}</a>
    </div>

    <div class="verupdate">下载zip压缩包，退出本程序，解压替换旧文件</div>
    <br />
    <br />
  </a-modal>
</template>

<script lang="ts">
  import { defineComponent, computed, ref, watchEffect } from 'vue'
  import { StoreConfig } from '@/store/config'
  import { StoreUI } from '@/store/ui'
  export default defineComponent({
    name: 'VerUpdateModal',
    setup() {
      const checkShowModal = computed(() => StoreUI.Modal.ModalName === 'verupdate')
      const ServerExeVer = computed(() => StoreConfig.ServerConfig.ServerExeVer)
      const ServerExeVerUrl = computed(() => StoreConfig.ServerConfig.ServerExeVerUrl)
      const LocalExeVer = computed(() => StoreConfig.ServerConfig.LocalExeVer)
      const Local = ref('')
      watchEffect(() => {
        if (StoreUI.Modal.ModalName !== 'verupdate') {
          Local.value = StoreUI.Modal.ModalName
        } else {
          Local.value = ''
        }
      })

      function handleCancel() {
        StoreUI.mCloseModal()
      }

      return {
        checkShowModal,
        ServerExeVer,
        ServerExeVerUrl,
        LocalExeVer,
        handleCancel,
        Local,
      }
    },
  })
</script>

<style>
  .verupdate {
    font-size: 14px;
    color: rgba(49, 70, 89, 0.6);
    width: 100%;
    margin: 0 auto;
    text-align: left;
    padding-left: 90px;
    padding-bottom: 8px;
  }
</style>
